---
title: "Assignment 3"
output: 
  pdf_document: default
  html_document: default 
  df_print: paged
lang: no-NB 
---

bibliography: references.bib

```{r - Library}
library(tidyverse)
library(readr)
library(gapminder)
library(magrittr)
library(dplyr)
options(scipen 
        = 999)
```

# 1 
The file ddf_concepts.cvs contains descriptions of a set of different variables including unemployment rate, adults with hiv, labour force participation, aid, causes of deaths, cell phones, cars, health factors, countries GDP etc. Each of the 600 variables further includes data. 

# 2

The file ddf--entities--geo--country.csv contains information of all the countries in the world where each country is categorized based on g77 and OECD, UN members/recognition, income groups, religion, latitude, longitude and region (Europe and world).

# 3

df--entities--geo--un_sdg_region.csv contains information about UN recognized regions. 

# 4
The gapminder dataset consist of 1704 rows and includes the following variables:

- Country 
- Continent 
- Year
- LifeExp
- Pop
- gdpPercap

Australia and New Zealand is assigned to Asia.

# 5 

## mangler noe her:
## Tror ikke vi trenger å ha med *readr* her ettersom den er lengre oppe. 

```{r}
library(readr)
g_c <- read_csv("Data/ddf--entities--geo--country.csv")
print(g_c)
```


```{r}
spec(g_c)
```


**nederste må fikses, skjønner ikke hva som er feil**

```{r}
g_c <- g_c %>%
  mutate(continent = case_when(
     world_4region == "asia" & un_sdg_region %in% c("un_australia_and_new_zealand", "un_oceania_exc_australia_and_new_zealand") ~ "Oceania",
    world_4region ==  "asia" & !(un_sdg_region %in% c("un_australia_and_new_zealand", "un_oceania_exc_australia_and_new_zealand")) ~ "Asia",
    world_4region == "africa" ~ "Africa",
    world_4region == "americas" ~ "Americas",
    world_4region ==  "europe" ~ "Europe")
  ) %>%
 filter(!is.na(iso3166_1_alpha3))
```

# 6a 

```{r}
length(unique(g_c$country))
```

After filtrating the data from #5, are we left with 247 countries. 

# 6b

**sjekk faretrekant** 

```{r}
g_c %>%
  group_by(continent) %>%
  summarise(countries = length(unique(country)))
```
There are now a number of:

- 59 countries in Africa
- 55 countries in Americas
- 47 countries in Europe
- 28 countries in Oceania

# 7

```{r Country_Expectancy}
lifeExp <- read_csv(
  "data/countries-etc-datapoints/ddf--datapoints--life_expectancy_years--by--geo--time.csv", 
col_types = cols(
    time = col_date(
      format ="%Y"
      )))
lifeExp <- lifeExp %>%
rename(
  year = time)
length(
  unique(
    lifeExp$geo
    ))
names(
  lifeExp
  )
```

## skriv inn tekst her

# 8

```{r - Info about LifeExp}
length(
  unique(
    lifeExp$geo
    ))
```

## skriv inn tekst her 



# 9 

```{r}
g_c <- g_c %>% 
  select (
    country, name, iso3166_1_alpha3, un_sdg_region, world_4region, continent, world_6region
    ) %>% 
  left_join(
    lifeExp, by = c(
      "country" = "geo"
      )) 
names(
  g_c
  )
```

## Skriv inn tekst her


# 10  

## Er dette riktig? 

```{r}
g_c_min <- g_c %>% 
  group_by(
    country
    ) %>% 
  summarise(
    min_year = min(
      year
))
table(
  g_c_min$min_year
)
```

The observation is that 186 countries has data on **life expectancy years** from 1800 whereas only nine countries has data on **life expectancy years** from 1950. 

# 11

```{r}
g_c_min %>% 
filter(min_year == "1950-01-01")
```
 
The nine countries that only have life expectancy data from 1950 are displayed in the table above. 

# 12 

**Kan være noe mer som må addes til denne koden**

```{r}
pop <- read_csv("data/global-regions-datapoints/ddf--datapoints--population_total--by--global--time.csv",
col_types = cols(
  time = col_date(
    format = "%Y"))) 
```



```{r}
spec(ddf_datapoints_population_total_by_global_time)
```

## tester

**aner ikke hva som er feil her, eller hvordan man gjør det**

**Prøvde å gjøre litt forskjellig her, men fikk ikke det heller til. Vet at variabelen "geo" ikke ligger i *pop-datasettet*. Så hvis vi bruker f.eks "global" i steden for "geo" vil det funke**

```{r}
g_c <- g_c %>%
  left_join(pop, by = c("country" = "geo", "year" = "time"))
rm(pop)
```


# 13

```{r}
library(readr)
gdp_pc <- read_csv("data/countries-etc-datapoints/ddf--datapoints--gdppercapita_us_inflation_adjusted--by--geo--time.csv") %>% 
left_join(g_c$pop) 
names(g_c)
View(ddf_datapoints_gdppercapita_us_inflation_adjusted_by_geo_time)
```
## TEST av THIBIGA

```{r}
gdp_pc <- read_csv("data/countries-etc-datapoints/ddf--datapoints--gdppercapita_us_inflation_adjusted--by--geo--time.csv")
```

```{r}
g_c <- g_c %>% 
left_join(gdp_pc, by = c("country" = "geo", "year" = "time")) 
```


```{r}
spec(gdp_pc)
```

```{r}
g_c <- g_c %>% 
  left_join(gdp_pc, by = c("country" = "geo", "year" = "time")))
```



